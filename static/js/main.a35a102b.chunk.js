(this.webpackJsonpgames_of_cards=this.webpackJsonpgames_of_cards||[]).push([[0],{20:function(e,t,c){},21:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){"use strict";c.r(t);var a=c(3),i=c.n(a),s=c(9),n=c.n(s),r=(c(20),c(21),c(4)),l=c(2),o=c(0),d=c(10),b=c(11),h=c(15),f=c(14),u=c(8),j=c(12),O=c.n(j),p=c(13),v=function(){var e=[1,2,3,4,5,6,7,8,9,10,11,12,13],t=[];return["\u2665\ufe0f","\u2666\ufe0f","\u2660\ufe0f","\u2663\ufe0f"].forEach((function(c){var a,i=Object(p.a)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;t=[].concat(Object(o.a)(t),[{value:s,symbole:c,color:"\u2665\ufe0f"===c||"\u2666\ufe0f"===c?"red":"black"}])}}catch(n){i.e(n)}finally{i.f()}})),t},x=c(1),S=function(e){var t=e.index,c=e.stackIndex,a=e.place,i=e.card,s=e.onClick,n="";"\u2665\ufe0f"===i.symbole?n="heart":"\u2666\ufe0f"===i.symbole?n="diamond":"\u2660\ufe0f"===i.symbole?n="spade":"\u2663\ufe0f"===i.symbole&&(n="club");var r="".concat(i.value),o="/img/".concat(n,"/").concat(r,".png"),d={backgroundImage:"url(".concat("/gamesOfCards"+o,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"};return d="win"===a?Object(l.a)(Object(l.a)({},d),{},{top:"0px"}):Object(l.a)(Object(l.a)({},d),{},{top:"".concat(30*t,"px")}),Object(x.jsx)("div",{className:"card",onClick:function(){return"win"===a?null:s(t,c,a)},style:d})},m=(c(24),0),g=function(e){Object(h.a)(c,e);var t=Object(f.a)(c);function c(){var e;Object(d.a)(this,c);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={deck:O()(v()),board:[[],[],[],[],[],[],[],[]],freePlaces:[[],[],[],[]],winPlaces:{heart:[],club:[],diamond:[],spade:[]},cardsSelection:{active:!1,placeSelection:"",cards:[],firstCard:[],indexFirstCard:[],indexStackSelected:[]},history:[],indexHistory:0},e.shiftingCard=function(t,c,a){var i=e.state,s=i.board,n=i.freePlaces,r=i.cardsSelection,d=a;if("board"===a?a=s:"free"===a&&(a=n),r.active)e.shiftCards(c,a);else{var b=a[c].slice(t);if(b.length>m+1)e.impossibleSelection();else if(b.length>1){var h=b.map((function(e){return e.value})),f=Object(o.a)(h);f=f.sort((function(e,t){return t-e}));for(var u=[],j=1;j<f.length;j++)u.push(f[j-1]-f[j]);var O=!u.some((function(e){return 1!==e}));if(h.every((function(e,t){return e===f[t]}))&&O){for(var p=b.map((function(e){return e.color})),v=[],x=1;x<p.length;x++)p[x]!==p[x-1]?v.push(!0):v.push(!1);!v.includes(!1)?e.setState({cardsSelection:Object(l.a)(Object(l.a)({},r),{},{active:!0,placeSelection:d,cards:a[c].slice(t),firstCard:a[c][t],indexFirstCard:[t],indexStackSelected:c})}):e.impossibleSelection()}else e.impossibleSelection()}else 1===b.length&&e.setState({cardsSelection:Object(l.a)(Object(l.a)({},r),{},{active:!0,placeSelection:d,cards:a[c].slice(t),firstCard:a[c][t],indexFirstCard:[t],indexStackSelected:c})})}},e.historyNavigation=function(t){var c=e.state,a=c.indexHistory,i=c.history,s={};s=e.state.cardsSelection.active?{active:!1,placeSelection:"",cards:[],firstCard:[],indexFirstCard:[],indexStackSelected:[]}:Object(l.a)({},e.state.cardsSelection),"back"===t?0!==a&&e.setState({board:i[a-1].board,freePlaces:i[a-1].freePlaces,winPlaces:i[a-1].winPlaces,indexHistory:a-1,cardsSelection:s}):"next"===t&&a!==i.length-1&&e.setState({board:i[a+1].board,freePlaces:i[a+1].freePlaces,winPlaces:i[a+1].winPlaces,indexHistory:a+1,cardsSelection:s})},e}return Object(b.a)(c,[{key:"componentDidMount",value:function(){this.distribution()}},{key:"distribution",value:function(){var e=Object(o.a)(this.state.board);this.state.deck.forEach((function(t){for(var c=0;c<8;c++){if(c<4&&e[c].length<7){e[c]=[].concat(Object(o.a)(e[c]),[t]);break}if(c>=4&&e[c].length<6){e[c]=[].concat(Object(o.a)(e[c]),[t]);break}}})),this.setState({board:e,history:[{board:Object(o.a)(e),freePlaces:Object(o.a)(this.state.freePlaces),winPlaces:Object(l.a)({},this.state.winPlaces)}]})}},{key:"authorizationSelection",value:function(){var e=this.state,t=e.board,c=e.freePlaces,a=0;c.map((function(e){return 0===e.length?a++:null})),t.map((function(e){return 0===e.length?a++:null})),m=a}},{key:"displaySymboleOnWinPlace",value:function(e){return"heart"===e?Object(x.jsx)("p",{className:"symbole",style:{color:"red"},children:"\u2665\ufe0f"}):"diamond"===e?Object(x.jsx)("p",{className:"symbole",style:{color:"red"},children:"\u2666\ufe0f"}):"club"===e?Object(x.jsx)("p",{className:"symbole",children:"\u2663\ufe0f"}):"spade"===e?Object(x.jsx)("p",{className:"symbole",children:"\u2660\ufe0f"}):void 0}},{key:"shiftCards",value:function(e,t){var c=!1,a=this.state,i=a.board,s=a.freePlaces,n=a.winPlaces,d=a.cardsSelection,b=null;"board"===d.placeSelection?b=i:"free"===d.placeSelection&&(b=s);var h=[];t!==n&&(h=Object(o.a)(t));var f=Object(o.a)(b[d.indexStackSelected]),u=t[e],j=Object(o.a)(i),O=Object(o.a)(s),p=Object(l.a)({},n);if(u===f)this.impossibleAction();else if(t===i)if(0===u.length)if(f.splice(d.indexFirstCard,d.cards.length),b===i)h[d.indexStackSelected]=f,h[e]=[].concat(Object(o.a)(h[e]),Object(o.a)(d.cards)),j=h,c=!0;else{var v=Object(o.a)(b);v[d.indexStackSelected]=f,h[e]=[].concat(Object(o.a)(h[e]),Object(o.a)(d.cards)),j=h,O=v,c=!0}else{var x=u[u.length-1];if(x.value===d.firstCard.value+1&&x.symbole!==d.firstCard.symbole)if(f.splice(d.indexFirstCard,d.cards.length),b===s){var S=Object(o.a)(b);S[d.indexStackSelected]=f,h[e]=[].concat(Object(o.a)(h[e]),Object(o.a)(d.cards)),j=h,O=S,c=!0}else h[d.indexStackSelected]=f,h[e]=[].concat(Object(o.a)(h[e]),Object(o.a)(d.cards)),j=h,c=!0;else this.impossibleAction()}else if(t===s)if(1===d.cards.length&&0===t[e].length)if(f.splice(d.indexFirstCard,d.cards.length),b===i){var m=Object(o.a)(b);m[d.indexStackSelected]=f,h[e]=[].concat(Object(o.a)(h[e]),Object(o.a)(d.cards)),j=m,O=h,c=!0}else h[d.indexStackSelected]=f,h[e]=[].concat(Object(o.a)(h[e]),Object(o.a)(d.cards)),O=h,c=!0;else this.impossibleAction();else if(t===n)if(1===d.cards.length){var g="";if("\u2665\ufe0f"===d.firstCard.symbole&&(g="heart"),"\u2663\ufe0f"===d.firstCard.symbole&&(g="club"),"\u2666\ufe0f"===d.firstCard.symbole&&(g="diamond"),"\u2660\ufe0f"===d.firstCard.symbole&&(g="spade"),e===g){if(1===d.firstCard.value&&0===n[e].length||0!==n[e].length&&d.firstCard.value===n[e][n[e].length-1].value+1){f.splice(d.indexFirstCard,d.cards.length);var y=Object(o.a)(b);y[d.indexStackSelected]=f,b===i?(j=y,p=Object(l.a)(Object(l.a)({},n),{},Object(r.a)({},e,[].concat(Object(o.a)(n[e]),[d.firstCard]))),c=!0):b===s&&(O=y,p=Object(l.a)(Object(l.a)({},n),{},Object(r.a)({},e,[].concat(Object(o.a)(n[e]),[d.firstCard]))),c=!0)}}else this.impossibleAction()}else this.impossibleAction();if(c){var k=Object(o.a)(this.state.history);this.state.indexHistory<this.state.history.length-1&&k.splice(this.state.indexHistory+1,this.state.history.length-this.state.indexHistory),this.setState({board:Object(o.a)(j),freePlaces:Object(o.a)(O),winPlaces:Object(l.a)({},p),cardsSelection:{active:!1,placeSelection:"",cards:[],indexFirstCard:[],indexStackSelected:[]},history:[].concat(Object(o.a)(k),[{board:Object(o.a)(j),freePlaces:Object(o.a)(O),winPlaces:Object(l.a)({},p)}]),indexHistory:this.state.indexHistory+1})}}},{key:"impossibleSelection",value:function(){console.log("Selection Impossible")}},{key:"impossibleAction",value:function(){console.log("Action Impossible"),this.setState({cardsSelection:{active:!1,placeSelection:"",cards:[],indexFirstCard:[],indexStackSelected:[]}})}},{key:"selectionMarker",value:function(){var e=window.innerWidth,t=0;return e<470?t=36:e>=470&&e<650?t=46:e>=650&&e<950?t=69:e>=950&&(t=94),console.log(this.state.cardsSelection.cards.length),Object(x.jsx)("div",{className:"selection",style:{top:"".concat(30*this.state.cardsSelection.indexFirstCard,"px"),height:"".concat(30*(this.state.cardsSelection.cards.length-1)+t,"px")},onClick:this.impossibleAction.bind(this)})}},{key:"render",value:function(){var e=this;console.log(this.state.indexHistory),console.log(this.state.history.length);var t=this.state,c=t.board,a=t.freePlaces,i=t.winPlaces,s=t.cardsSelection;return this.authorizationSelection(),Object(x.jsxs)("div",{className:"carpet",children:[Object(x.jsx)("p",{children:"Test Freecell"}),Object(x.jsxs)("div",{className:"top-board",children:[Object(x.jsx)("div",{className:"free-places",children:a.map((function(t,c,a){return Object(x.jsxs)("div",{className:"place",onClick:0===t.length&&0!==s.cards.length?function(){e.shiftCards(c,a)}:null,children:[1===t.length?t.map((function(t,a){return Object(x.jsx)(S,{index:a,stackIndex:c,card:t,place:"free",onClick:e.shiftingCard},a)})):null,s.active&&s.indexStackSelected===c&&"free"===s.placeSelection?e.selectionMarker():null]},c)}))}),Object(x.jsx)("div",{className:"win-places",children:Object.entries(i).map((function(t){var c=t[0],a=t[1];return Object(x.jsxs)("div",{className:"place",style:{display:"flex",alignItems:"center"},onClick:0!==s.cards.length?function(){e.shiftCards(c,i)}:null,children:[e.displaySymboleOnWinPlace(c),a.map((function(e,t){return Object(x.jsx)(S,{index:t,stackIndex:c,place:"win",card:e},t)}))]},c)}))})]}),Object(x.jsx)("div",{className:"board",children:c.map((function(t,c,a){return Object(x.jsxs)("div",{className:"place",onClick:0===a[c].length&&0!==s.cards.length?function(){e.shiftCards(c,a)}:null,children:[t.map((function(t,a){return Object(x.jsx)(S,{index:a,stackIndex:c,place:"board",card:t,onClick:e.shiftingCard},a)})),s.active&&s.indexStackSelected===c&&"board"===s.placeSelection?e.selectionMarker():null]},c)}))}),Object(x.jsxs)("div",{className:"options",children:[Object(x.jsx)("div",{className:"arrow back",onClick:function(){return e.historyNavigation("back")},children:Object(x.jsx)(u.a,{})}),Object(x.jsx)("div",{className:"arrow next",onClick:function(){return e.historyNavigation("next")},children:Object(x.jsx)(u.b,{})})]})]})}}]),c}(a.Component);var y=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(g,{})})},k=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,26)).then((function(t){var c=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,n=t.getTTFB;c(e),a(e),i(e),s(e),n(e)}))};n.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(y,{})}),document.getElementById("root")),k()}},[[25,1,2]]]);
//# sourceMappingURL=main.a35a102b.chunk.js.map